(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,n){},50:function(e,t,n){e.exports=n(62)},58:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(42),l=n.n(c),o=(n(58),n(40),n(10)),s=n(2),i=n(3);function u(e,t,n,a){var r;a&&(r=JSON.stringify(a));var c=new XMLHttpRequest,l="".concat("https://twtr-clone.fly.dev","/api").concat(t);c.responseType="json";var o=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var r=n[a].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}("csrftoken");c.open(e,l),c.setRequestHeader("Content-Type","application/json"),o&&(c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("X-CSRFToken",o)),c.onload=function(){403===c.status&&("Authentication credentials were not provided."===c.response.detail&&-1===window.location.href.indexOf("login")&&(window.location.href="/login?showLoginRequired=true"));n(c.response,c.status)},c.onerror=function(e){console.log(e),n({message:"An error occurred."},400)},c.send(r)}function m(e,t){u("GET","/tweets/".concat(e,"/replies/"),t)}function f(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";u("POST","/tweets/action/",n,""===a?{id:e,action:t}:{id:e,action:t,content:a})}function d(e,t,n){var a="/tweets/";e&&(a="/tweets/?username=".concat(e)),null!==n&&void 0!==n&&(a=n.replace("".concat("https://twtr-clone.fly.dev","/api"),"")),u("GET",a,t)}function p(e,t){var n="/tweets/feed";null!==t&&void 0!==t&&(n=t.replace("".concat("https://twtr-clone.fly.dev","/api"),"")),u("GET",n,e)}var b=n(64),E=n(65),w=n(67),v=n(66);function h(e,t){u("GET","/profiles/".concat(e,"/bookmarks"),t)}function g(e){var t=e.tweet,n=e.action,c=e.didPerformAction,l=t.likes?t.likes:0,o=e.className?e.className:"btn btn-primary btn-sm rounded-pill me-1",i=Object(a.useState)(!1),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(a.useState)(""),v=Object(s.a)(p,2),h=v[0],g=v[1],O=function(e,t){console.log(e,t),200!==t&&201!==t||!c||c(e,t)},j="";"like"===n.type?j="fas fa-thumbs-up":"unlike"===n.type?j="fas fa-thumbs-down":"retweet"===n.type&&(j="fas fa-retweet");var y="like"===n.type?"".concat(l," "):"";return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:o,onClick:function(e){e.preventDefault(),"retweet"===n.type?d(!0):f(t.id,n.type,O)}},y," ",r.a.createElement("i",{className:j})),r.a.createElement(b.a,{show:m,onHide:function(){return d(!1)}},r.a.createElement(b.a.Header,{closeButton:!0},r.a.createElement(b.a.Title,{className:"d-flex justify-content-center"},"Retweet")),r.a.createElement(b.a.Body,null,r.a.createElement(E.a,{onSubmit:function(e){e.preventDefault(),f(t.id,n.type,O,h),d(!1)}},r.a.createElement(E.a.Group,{controlId:"retweetForm.ControlInput"},r.a.createElement(E.a.Label,null,"Your comment: (optional)"),r.a.createElement(E.a.Control,{className:"form-control me-2 rounded-pill p-4",type:"text",rows:3,value:h,onChange:function(e){return g(e.target.value)}})),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(w.a,{variant:"primary",type:"submit",className:"btn btn-primary my-3 rounded-pill p-3 w-25"},r.a.createElement("i",{className:"fas fa-paper-plane"}),"\u2003Send"))))))}function O(e){var t=e.tweet,n=e.onDelete;return r.a.createElement("button",{className:"btn btn-danger btn-sm rounded-pill me-1",onClick:function(){n(t.id)}},r.a.createElement("i",{className:"fas fa-trash"}))}function j(e){var t=e.tweet,n=e.currentUser,c=e.didBookmarkRemoved,l=e.className?e.className:"btn btn-primary btn-sm rounded-pill me-1",o=Object(a.useState)(!1),i=Object(s.a)(o,2),m=i[0],f=i[1],d=Object(a.useState)(""),p=Object(s.a)(d,2),b=p[0],E=p[1],w=function(e,n){201===n?(E("Tweet added to bookmarks"),f(!0),setTimeout(function(){return f(!1)},2e3)):204===n&&(E("Tweet removed from bookmarks"),f(!0),setTimeout(function(){return f(!1)},2e3),c(t.id))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{"data-testid":"delete-button",className:l,onClick:function(e){var a,r,c;e.preventDefault(),a=n.username,r=t.id,c=w,u("POST","/profiles/".concat(a,"/bookmarks/").concat(r),c)}},r.a.createElement("i",{className:"fas fa-bookmark"})),r.a.createElement(v.a,{style:{borderRadius:"25px",borderColor:"white",height:"50px",backgroundColor:"#282828",color:"white"},onClose:function(){return f(!1)},show:m,delay:2e3,autohide:!0},r.a.createElement(v.a.Body,null,b)))}function y(e,t,n){var a={action:"".concat(t&&t).toLowerCase()};u("POST","/profiles/".concat(e,"/follow"),n,a)}function k(e,t,n){var a="/tweets/likes?username=".concat(encodeURIComponent(e));null!==n&&void 0!==n&&(a=n.replace("".concat("https://twtr-clone.fly.dev","/api"),"")),u("GET",a,t)}function N(e,t,n){var a="/tweets/replies?username=".concat(encodeURIComponent(e));null!==n&&void 0!==n&&(a=n.replace("".concat("https://twtr-clone.fly.dev","/api"),"")),u("GET",a,t)}function S(e,t,n){var a="/profiles/".concat(encodeURIComponent(e),"/followers");null!==n&&void 0!==n&&(a=n.replace("".concat("https://twtr-clone.fly.dev","/api"),"")),u("GET",a,t)}function T(e,t,n){var a="/profiles/".concat(encodeURIComponent(e),"/following");null!==n&&void 0!==n&&(a=n.replace("".concat("https://twtr-clone.fly.dev","/api"),"")),u("GET",a,t)}var x=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!0),l=Object(s.a)(c,2),o=l[0],i=l[1];return Object(a.useEffect)(function(){fetch("".concat("https://twtr-clone.fly.dev","/api/accounts/current-user/")).then(function(e){return e.json()}).then(function(e){r(e),i(!1)})},[]),{currentUser:n,isLoading:o}};function U(e){var t=e.username;return r.a.createElement("span",{className:"pointer",onClick:function(e){window.location.href="/profiles/".concat(t)}},e.children)}function R(e){var t=e.user,n=e.includeFullName,a=e.hideLink,c=!0===n?"".concat(t.first_name," ").concat(t.last_name," "):null;return r.a.createElement(r.a.Fragment,null,c,!0===a?"@".concat(t.username):r.a.createElement(U,{username:t.username},"@",t.username))}function L(e){var t=e.user,n=e.hideLink,a=r.a.createElement("span",{className:"mx-1 px-3 py-2 rounded-circle bg-white text-dark"},t.username[0]);return!0===n?a:r.a.createElement(U,{username:t.username},a)}function C(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],l=n[1],u=Object(a.useState)(null),m=Object(s.a)(u,2),f=m[0],d=m[1],p=Object(a.useState)(!1),b=Object(s.a)(p,2),E=b[0],w=b[1],v=e.areReplies,h=x(),g=h.currentUser,O=h.isLoading,j=r.a.useRef(),y=Object(i.p)().username;Object(a.useEffect)(function(){var e=function(e,t){200===t?(d(e.next),l(e.results)):alert("There was an error.")};v?N(y,e):k(y,e)},[y,E,v]);var S=Object(a.useCallback)(function(e){if(e&&e.preventDefault(),null!==f){var t=function(e,t){if(200===t){d(e.next);var n=Object(o.a)(c).concat(e.results);l(n)}else alert("There was an error.")};v?N(y,t):k(y,t)}},[c,f,y,v]);Object(a.useEffect)(function(){var e=j.current,t=new IntersectionObserver(function(e){e.some(function(e){return e.isIntersecting})&&S()});return e&&t.observe(e),function(){e&&t.unobserve(e)}},[S]);var T=function(e){w(!E)};return O?r.a.createElement("div",null,"Loading..."):r.a.createElement(r.a.Fragment,null,c.map(function(e,t){return r.a.createElement(_,{tweet:e,currentUser:g,unliked:T,className:"my-4 py-2 border bg-dark text-white rounded-pill w-50",key:"".concat(t,"-").concat(e.id)})}),r.a.createElement("div",{ref:j}))}var F=n(47),D=n.n(F);function I(e){return r.a.createElement("span",{className:e.className},D()(e.children).format("0a"))}var A=n(12);function G(e){var t=e.user,n=e.didFollowToggle,a=e.profileLoading,c=e.currentUserUsername,l=t&&t.is_following?"Unfollow":"Follow";l=a?"Loading...":l;return t?r.a.createElement("div",{style:{marginLeft:"60px",marginRight:"100px"}},r.a.createElement("div",{style:{marginLeft:"60px",display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement(L,{user:t,hideLink:!0}),t.username!==c?r.a.createElement("button",{className:"btn btn-primary rounded-pill",onClick:function(e){e.preventDefault(),n&&!a&&n(l)}},l):null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{align:"left"},r.a.createElement(R,{user:t,includeFullName:!0,hideLink:!0})),r.a.createElement("p",{align:"left",style:{width:"450px"}},t.bio),r.a.createElement("p",{align:"left"},r.a.createElement("i",{className:"fa fa-map-marker-alt"}),"\u2002",t.location,"\u2002\u2002",r.a.createElement("i",{className:"fa fa-calendar-alt"}),"\u2002Joined\u2002",new Intl.DateTimeFormat("en-US",{month:"long",year:"numeric"}).format(new Date(t.timestamp))),r.a.createElement("p",{style:{display:"flex",alignItems:"center"}},r.a.createElement(A.b,{to:"/profiles/".concat(t.username,"/followers"),style:{textDecoration:"none",color:"inherit"}},r.a.createElement(I,null,t.followers_count),"\xa0",1===t.followers_count?"follower":"followers"),"\u2002\u2002",r.a.createElement(A.b,{to:"/profiles/".concat(t.username,"/following"),style:{textDecoration:"none",color:"inherit"}},r.a.createElement(I,null,t.following_count),"\xa0following"))):null}function P(e){var t=Object(i.p)().username,n=e.currentUserUsername,c=Object(a.useState)(!1),l=Object(s.a)(c,2),o=l[0],m=l[1],f=Object(a.useState)(null),d=Object(s.a)(f,2),p=d[0],b=d[1],E=Object(a.useState)(!1),w=Object(s.a)(E,2),v=w[0],h=w[1],g=function(e,t){200===t&&b(e)};Object(a.useEffect)(function(){!1===o&&(!function(e,t){u("GET","/profiles/".concat(e,"/"),t)}(t,g),m(!0))},[t,o,m]);return!1===o?"Loading...":p?r.a.createElement(G,{user:p,currentUserUsername:n,didFollowToggle:function(e){y(t,e,function(e,t){200===t&&b(e),h(!1)}),h(!0)},profileLoading:v}):null}function B(e){var t=e.currentUser,n=Object(a.useState)("tweets"),c=Object(s.a)(n,2),l=c[0],o=c[1];return r.a.createElement("div",{className:"mt-4"},t&&r.a.createElement("div",{className:"py-4 border rounded-pill w-50 p-4"},r.a.createElement(P,{currentUserUsername:t.username})),t&&r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-between border rounded-pill w-25 my-3",style:{marginLeft:"150px"}},r.a.createElement("button",{className:"btn btn-primary rounded-pill",onClick:function(){return o("tweets")}},"Tweets"),r.a.createElement("button",{className:"btn btn-primary rounded-pill",onClick:function(){return o("replies")}},"Replies"),r.a.createElement("button",{className:"btn btn-primary rounded-pill",onClick:function(){return o("likes")}},"Likes")),function(){switch(l){case"tweets":return r.a.createElement(Q,{currentUserUsername:t.username});case"replies":return r.a.createElement(C,{currentUserUsername:t.username,areReplies:!0});case"likes":return r.a.createElement(C,{currentUserUsername:t.username,areReplies:!1});default:return null}}()))}function q(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],l=n[1],u=Object(a.useState)([]),m=Object(s.a)(u,2),f=m[0],d=m[1],p=Object(a.useState)(null),b=Object(s.a)(p,2),E=b[0],w=b[1],v=e.currentUser,h=e.followers,g=r.a.useRef(),O=Object(i.p)().username;Object(a.useEffect)(function(){if(!1===c){var e=function(e,t){200===t?(w(e.next),d(e.results),l(!0)):alert("There was an error.")};h?S(O,e):T(O,e)}},[f,c,l,O,h]);var j=Object(a.useCallback)(function(e){if(e&&e.preventDefault(),null!==E){var t=function(e,t){if(200===t){w(e.next);var n=Object(o.a)(f).concat(e.results);d(n)}else alert("There was an error.")};h?S(O,t):T(O,t)}},[E,O,h,f]);Object(a.useEffect)(function(){var e=g.current,t=new IntersectionObserver(function(e){e.some(function(e){return e.isIntersecting})&&j()});return e&&t.observe(e),function(){e&&t.unobserve(e)}},[j]);return r.a.createElement(r.a.Fragment,null,f.map(function(e,t){return r.a.createElement("div",{className:"my-4 py-2 border bg-white text-dark rounded-pill w-50",key:"".concat(t)},r.a.createElement(L,{user:e,hideLink:!1}),"\u2002",r.a.createElement(R,{user:e,includeFullName:!0,hideLink:!1}),O===v.username&&!1===h?r.a.createElement("button",{className:"btn btn-primary rounded-pill",style:{marginLeft:"300px"},onClick:function(){var t;y((t=e).username,"unfollow",function(e,n){200===n&&d(f.filter(function(e){return e.username!==t.username}))})}},"Unfollow"):null)}),r.a.createElement("div",{ref:g}))}function H(e){var t=e.tweet,n=e.onDeleteSuccess;return t.parent?r.a.createElement(_,{isRetweet:!0,retweeter:e.retweeter,hideActions:!0,className:"my-4 py-2 border bg-dark text-white rounded-pill",tweet:t.parent,onDeleteSuccess:n}):null}function _(e){var t=e.tweet,n=e.currentUser,c=e.didRetweet,l=e.hideActions,o=e.isRetweet,i=e.onDeleteSuccess,f=e.unliked,d=e.didBookmarkRemoved,p=Object(a.useState)(e.tweet?e.tweet:null),b=Object(s.a)(p,2),E=b[0],v=b[1],h=e.className?e.className:"col-10 mx-auto col-md-6";h=!0===o?"".concat(h," p-2 border rounded"):h;var y=Object(a.useState)(e.repliesCount),k=Object(s.a)(y,2),N=k[0],S=k[1],T=function(e,t){200===t?(v(e),void 0!==f&&f(e)):201===t&&c&&c(e)},x=function(e,t){200===t&&void 0!==e.results.length&&S(e.results.length)};return Object(a.useEffect)(function(){m(t.id,x)},[t,e.repliesCount]),r.a.createElement("div",{className:h},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"col-3 my-auto p-2"},r.a.createElement(L,{user:t.user}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement(R,{includeFullName:!0,user:t.user}))),r.a.createElement("div",{className:"col-8"},r.a.createElement(A.b,{to:"/".concat(t.id),className:"tweet-wrapper",style:{textDecoration:"none",color:"inherit"}},r.a.createElement("div",null,r.a.createElement("p",null,t.content),r.a.createElement(H,{tweet:t,retweeter:t.user,onDeleteSuccess:i}))),r.a.createElement("br",null),r.a.createElement("div",{className:"btn btn-group px-0"},E&&!0!==l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{variant:"primary",className:"btn btn-primary rounded-pill mx-1",href:"/".concat(t.id)},N," ",r.a.createElement("i",{className:"fas fa-comment"})),r.a.createElement(g,{tweet:E,didPerformAction:T,action:{type:"like",display:"Like"}}),r.a.createElement(g,{tweet:E,didPerformAction:T,action:{type:"unlike",display:"Unlike"}}),r.a.createElement(g,{tweet:t,didPerformAction:T,action:{type:"retweet",display:"Retweet"}}),n&&n.username===t.user.username&&r.a.createElement(O,{tweet:t,onDelete:function(e){!function(e,t){u("DELETE","/tweets/".concat(e,"/delete/"),t)}(e,function(t,n){204===n?i(e):console.log(t)})}}),r.a.createElement(j,{tweet:t,currentUser:n,didBookmarkRemoved:function(e){d(e)}}))))))}function J(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],l=n[1],u=Object(a.useState)([]),m=Object(s.a)(u,2),f=m[0],b=m[1],E=Object(a.useState)(null),w=Object(s.a)(E,2),v=w[0],h=w[1],g=Object(a.useState)(!1),O=Object(s.a)(g,2),j=O[0],y=O[1],k=x(),N=k.currentUser,S=k.isLoading,T=r.a.useRef(),U=Object(i.p)();Object(a.useEffect)(function(){if(null===e.searchedTweets){var t=Object(o.a)(e.newTweets).concat(c);t.length!==f.length&&b(t)}else e.searchedTweets&&b(e.searchedTweets)},[e.searchedTweets,e.newTweets,f,c]),Object(a.useEffect)(function(){if(!1===j){var t=function(e,t){200===t?(h(e.next),l(e.results),y(!0)):alert("There was an error.")};e.isFeed?p(t):d(U.username,t)}},[c,j,y,U.username,e.isFeed]);var R=function(t){if(!1!==e.isFeed||N===U){var n=Object(o.a)(c);n.unshift(t),l(n);var a=Object(o.a)(f);a.unshift(t),b(a)}},L=Object(a.useCallback)(function(t){if(t&&t.preventDefault(),null!==v){var n=function(e,t){if(200===t){h(e.next);var n=Object(o.a)(f).concat(e.results);l(n),b(n)}else alert("There was an error.")};e.isFeed?p(n,v):d(U.username,n,v)}},[f,v,e.isFeed,U.username]);Object(a.useEffect)(function(){var e=T.current,t=new IntersectionObserver(function(e){e.some(function(e){return e.isIntersecting})&&L()});return e&&t.observe(e),function(){e&&t.unobserve(e)}},[L]);var C=function(e){l(f.filter(function(t){return t.id!==e})),b(f.filter(function(t){return t.id!==e}))};return S?r.a.createElement("div",null,"Loading..."):r.a.createElement(r.a.Fragment,null,f.map(function(e,t){return r.a.createElement(_,{tweet:e,currentUser:N,didRetweet:R,onDeleteSuccess:C,className:"my-4 py-2 border bg-dark text-white rounded-pill w-50",key:"".concat(t,"-").concat(e.id),"data-testid":"tweet-item"})}),r.a.createElement("div",{ref:T,"data-testid":"sentinel"}))}function M(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],l=n[1],o=e.setSearchResults;return Object(a.useEffect)(function(){c.trim()&&function(e,t){u("GET","/tweets/search/?q=".concat(encodeURIComponent(e)),t)}(c,function(e,t){200===t?o(e):console.log("Error while searching tweets: ",e)})},[c,o]),r.a.createElement("form",{className:"d-flex mt-2 w-50 p-2",role:"search"},r.a.createElement("input",{className:"form-control me-2 rounded-pill p-2 bg-dark text-white input-placeholder",type:"search",placeholder:"Search twitter","aria-label":"Search",value:c,onChange:function(e){l(e.target.value),""===e.target.value.trim()&&o(null)}}))}function W(e){var t=e.onSubmit,n=e.placeholder,a=r.a.createRef();return r.a.createElement("div",{className:"create-form p-2"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=a.current.value;t(n),a.current.value=""}},r.a.createElement("input",{ref:a,required:!0,className:"form-control me-2 rounded-pill p-4 bg-dark text-white input-placeholder",placeholder:n,name:"content"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary my-3 rounded-pill p-3 w-25"},r.a.createElement("i",{className:"fas fa-paper-plane"}),"\u2003Send")))}function X(e){var t=e.didTweet,n=function(e,n){201===n?t(e):(console.log(e),alert("An error occured, please try again."))};return r.a.createElement("div",{className:e.className},r.a.createElement(W,{onSubmit:function(e){u("POST","/tweets/create/",n,{content:e})},placeholder:"Write your tweet here..."}))}function Y(e){var t=e.didReply,n=e.upperTweetId,a=function(e,n){201===n?t(e):(console.log(e),alert("An error occured, please try again."))};return r.a.createElement("div",{className:e.className},r.a.createElement(W,{onSubmit:function(e){!function(e,t,n){u("POST","/tweets/".concat(t,"/reply/"),n,{content:e})}(e,n,a)},placeholder:"Write your reply here..."}))}function z(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],l=n[1],i="false"!==e.canTweet,u=Object(a.useState)([]),m=Object(s.a)(u,2),f=m[0],d=m[1];return r.a.createElement("div",{className:"container"},!0===e.isFeed&&r.a.createElement(M,{setSearchResults:d}),r.a.createElement("div",{className:e.className},!0===i&&!0===e.isFeed&&r.a.createElement(X,{didTweet:function(e){var t=Object(o.a)(c);t.unshift(e),l(t)},className:"col-6 mb-3"}),r.a.createElement(J,Object.assign({newTweets:c,searchedTweets:f&&f.length>0?f:null,isFeed:e.isFeed},e))))}function K(e){return r.a.createElement(z,Object.assign({isFeed:!0},e))}function Q(e){return r.a.createElement(z,Object.assign({isFeed:!1},e))}function V(){var e=Object(i.p)().tweetId;return r.a.createElement(Z,{tweetId:e})}function Z(e){var t=e.tweetId,n=Object(a.useState)(null),c=Object(s.a)(n,2),l=c[0],i=c[1],f=Object(a.useState)([]),d=Object(s.a)(f,2),p=d[0],b=d[1],E=x(),w=E.currentUser,v=E.isLoading,h=Object(a.useState)(!1),g=Object(s.a)(h,2),O=g[0],j=g[1],y=Object(a.useState)(null),k=Object(s.a)(y,2),N=k[0],S=k[1],T=Object(a.useState)(0),U=Object(s.a)(T,2),R=U[0],L=U[1],C=function(e,t){200===t?i(e):alert("There was an error finding tweet.")},F=function(e,t){200===t?"This is first tweet in thread."!==e.detail?S(e):S(null):alert("There was an error finding the previous tweet.")},D=function(e,t){200===t?(b(e.results||[]),L(e.results.length)):alert("There was an error finding replies.")};Object(a.useEffect)(function(){!function(e,t){u("GET","/tweets/".concat(e,"/previous/"),t)}(t,F)},[t]),Object(a.useEffect)(function(){!function(e,t){u("GET","/tweets/".concat(e,"/"),t)}(t,C),m(t,D)},[t,O]);var I=function(e){b(p.filter(function(t){return t.id!==e})),L(R-1)};return null===l?null:v?r.a.createElement("div",{"data-testid":"loading"},"Loading..."):r.a.createElement("div",{className:e.className},N&&r.a.createElement(_,{tweet:N,currentUser:w,className:"my-3 py-2 border bg-dark text-white rounded-pill w-50"}),N&&r.a.createElement("div",{class:"d-flex"},r.a.createElement("div",{class:"vertical-line"})),O?r.a.createElement("div",{class:"my-4 py-2 border bg-dark text-white rounded-pill w-50"},"This tweet has been deleted."):r.a.createElement(_,{tweet:l,currentUser:w,onDeleteSuccess:function(e){j(!0)},repliesCount:R,className:"my-3 py-2 border bg-dark text-white rounded-pill w-50"}),r.a.createElement(Y,{upperTweetId:t,didReply:function(e){var t=Object(o.a)(p);t.unshift(e),b(t),L(R+1)},className:"col-12 mb-3 w-50"}),p.slice().reverse().map(function(e,t){return r.a.createElement(_,{key:t,tweet:e,currentUser:w,onDeleteSuccess:I,className:"my-4 py-2 border bg-dark text-white rounded-pill w-50"})}))}var $=function(e){var t=e.currentUser;return r.a.createElement("div",{className:"sidebar w-25"},r.a.createElement("h3",null,"TWTR"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(A.b,{to:"/",style:{textDecoration:"none",color:"inherit"}},"Home")),r.a.createElement("li",null,"Explore"),r.a.createElement("li",null,"Notifications"),r.a.createElement("li",null,"Messages"),r.a.createElement("li",null,r.a.createElement(A.b,{to:"/bookmarks",style:{textDecoration:"none",color:"inherit"}},"Bookmarks")),t&&r.a.createElement("li",null,r.a.createElement(A.b,{to:"/profiles/".concat(t.username),style:{textDecoration:"none",color:"inherit"}},"Profile")),r.a.createElement("li",null,r.a.createElement("a",{href:"".concat("https://twtr-clone.fly.dev","/logout/"),className:"logout-link",style:{textDecoration:"none",color:"inherit"}},"Logout"))))};function ee(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)([]),i=Object(s.a)(l,2),u=i[0],m=i[1],f=Object(a.useState)(null),d=Object(s.a)(f,2),p=d[0],b=d[1],E=x(),w=E.currentUser,v=E.isLoading,g=r.a.useRef();Object(a.useEffect)(function(){if(!1===n&&null!==w){h(w.username,function(e,t){200===t?(b(e.next),m(e.results),c(!0)):alert("There was an error.")})}},[u,n,c,w]);var O=Object(a.useCallback)(function(e){if(e&&e.preventDefault(),null!==p){h(w.username,function(e,t){if(200===t){b(e.next);var n=Object(o.a)(u).concat(e.results);m(n)}else alert("There was an error.")})}},[p,w,u]);Object(a.useEffect)(function(){var e=g.current,t=new IntersectionObserver(function(e){e.some(function(e){return e.isIntersecting})&&O()});return e&&t.observe(e),function(){e&&t.unobserve(e)}},[O]);var j=function(e){m(u.filter(function(t){return t.id!==e}))};return v?r.a.createElement("div",null,"Loading..."):r.a.createElement(r.a.Fragment,null,u.map(function(e,t){return r.a.createElement(_,{tweet:e,currentUser:w,didBookmarkRemoved:j,className:"my-4 py-2 border bg-dark text-white rounded-pill w-50",key:"".concat(t,"-").concat(e.id)})}),r.a.createElement("div",{ref:g}))}var te=function(){var e=x(),t=e.currentUser,n=e.isLoading;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container",style:{marginLeft:"500px"}},r.a.createElement("div",{id:"search-bar"}),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(A.a,null,r.a.createElement("div",{id:"sidebar",style:{margin:"0 auto",textAlign:"right"}},r.a.createElement($,{currentUser:t})),r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/:tweetId",element:r.a.createElement(V,null)}),r.a.createElement(i.a,{path:"/profiles/:username/followers",element:r.a.createElement(q,{currentUser:t,followers:!0})}),r.a.createElement(i.a,{path:"/profiles/:username/following",element:r.a.createElement(q,{currentUser:t,followers:!1})}),r.a.createElement(i.a,{path:"/profiles/:username",element:r.a.createElement(B,{currentUser:t})}),r.a.createElement(i.a,{path:"/bookmarks",element:r.a.createElement(ee,{currentUser:t})}),r.a.createElement(i.a,{exact:!0,path:"/",element:!n&&t?r.a.createElement(K,{username:t.username,canTweet:!0}):r.a.createElement("p",null,"Loading...")}))))))},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,68)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,l=t.getTTFB;n(e),a(e),r(e),c(e),l(e)})},ae=document.getElementById("root");ae&&l.a.createRoot(ae).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)));ne()}},[[50,1,2]]]);
//# sourceMappingURL=main.2f1af5a2.chunk.js.map